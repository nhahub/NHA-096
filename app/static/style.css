* {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html, body {
        height: 100%;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
      }

      .chatbot-container {
        width: 100%;
        max-width: 56rem;
        height: 90vh;
        background: white;
        border-radius: 1rem;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .chat-header {
        background: linear-gradient(to right, #2563eb, #1d4ed8);
        padding: 1.25rem 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      }

      .chat-header-avatar {
        width: 2.5rem;
        height: 2.5rem;
        background: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
      }

      .chat-header-info h1 {
        color: white;
        font-size: 1.125rem;
        font-weight: 600;
        margin-bottom: 0.25rem;
      }

      .chat-header-info p {
        color: #93c5fd;
        font-size: 0.875rem;
      }

      .messages-container {
        flex: 1;
        overflow-y: auto;
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .message {
        display: flex;
        gap: 0.75rem;
        animation: slideIn 0.3s ease-out;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(0.5rem);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .message.user {
        flex-direction: row-reverse;
      }

      .message-avatar {
        width: 2rem;
        height: 2rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.125rem;
        flex-shrink: 0;
      }

      .message.bot .message-avatar {
        background: #e2e8f0;
        color: #334155;
      }

      .message.user .message-avatar {
        background: #2563eb;
        color: white;
      }

      .message-content {
        display: flex;
        flex-direction: column;
        max-width: 70%;
      }

      .message-bubble {
        padding: 0.75rem 1rem;
        border-radius: 1rem;
        word-wrap: break-word;
        line-height: 1.5;
        font-size: 0.875rem;
      }

      .message.bot .message-bubble {
        background: #f1f5f9;
        color: #1e293b;
        border-top-left-radius: 0.25rem;
      }

      .message.user .message-bubble {
        background: #2563eb;
        color: white;
        border-top-right-radius: 0.25rem;
      }

      .message-time {
        font-size: 0.75rem;
        margin-top: 0.25rem;
        padding: 0 0.25rem;
      }

      .message.bot .message-time {
        color: #94a3b8;
      }

      .message.user .message-time {
        color: #93c5fd;
        text-align: right;
      }

      .typing-indicator {
        display: flex;
        gap: 0.25rem;
        align-items: center;
        padding: 0.75rem 1rem;
        background: #f1f5f9;
        border-radius: 1rem;
        border-top-left-radius: 0.25rem;
        width: fit-content;
      }

      .typing-dot {
        width: 0.5rem;
        height: 0.5rem;
        background: #94a3b8;
        border-radius: 50%;
        animation: typing 1.4s infinite;
      }

      .typing-dot:nth-child(2) {
        animation-delay: 0.2s;
      }

      .typing-dot:nth-child(3) {
        animation-delay: 0.4s;
      }

      @keyframes typing {
        0%, 60%, 100% {
          opacity: 0.5;
          transform: translateY(0);
        }
        30% {
          opacity: 1;
          transform: translateY(-0.5rem);
        }
      }

      .input-section {
        border-top: 1px solid #e2e8f0;
        padding: 1rem;
        background: #f8fafc;
      }

      .input-wrapper {
        display: flex;
        gap: 0.75rem;
        align-items: flex-end;
      }

      .input-wrapper textarea {
        flex: 1;
        border: 1px solid #cbd5e1;
        border-radius: 0.75rem;
        padding: 0.75rem 1rem;
        font-family: inherit;
        font-size: 0.875rem;
        resize: none;
        rows: 1;
        min-height: 2.75rem;
        max-height: 6rem;
        focus: outline-none;
        transition: all 0.2s;
      }

      .input-wrapper textarea:focus {
        outline: none;
        border-color: transparent;
        box-shadow: 0 0 0 2px #2563eb;
      }

      .send-button {
        width: 2.75rem;
        height: 2.75rem;
        border: none;
        background: #2563eb;
        color: white;
        border-radius: 0.75rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
        font-size: 1.25rem;
      }

      .send-button:hover:not(:disabled) {
        background: #1d4ed8;
      }

      .send-button:disabled {
        background: #cbd5e1;
        cursor: not-allowed;
      }

      .messages-container::-webkit-scrollbar {
        width: 0.5rem;
      }

      .messages-container::-webkit-scrollbar-track {
        background: transparent;
      }

      .messages-container::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 0.25rem;
      }

      .messages-container::-webkit-scrollbar-thumb:hover {
        background: #94a3b8;
      }

      @media (max-width: 768px) {
        .chatbot-container {
          height: 100vh;
          border-radius: 0;
        }

        .message-content {
          max-width: 85%;
        }

        .chat-header h1 {
          font-size: 1rem;
        }
      }

      /* Theme variables and overrides appended to avoid editing existing rules */
      :root{
        --page-bg: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
        --container-bg: #ffffff;
        --header-start: #2563eb;
        --header-end: #1d4ed8;
        --header-text: #ffffff;
        --subtext: #93c5fd;
        --bot-bubble-bg: #f1f5f9;
        --bot-bubble-color: #1e293b;
        --user-bubble-bg: #2563eb;
        --user-bubble-color: #ffffff;
        --input-bg: #f8fafc;
        --input-border: #cbd5e1;
        --typing-dot: #94a3b8;
        --scroll-thumb: #cbd5e1;
        --send-button-bg: #2563eb;
        --send-button-color: #ffffff;
        --send-button-disabled-bg: #cbd5e1;
        --text-color: #0f1724;
      }

      [data-theme="dark"]{
        /* refined dark palette for improved contrast and cohesion */
        --page-bg: linear-gradient(135deg, #071026 0%, #06121a 100%);
        --container-bg: #071026; /* deep navy/teal base */
        --header-start: #0ea5e9; /* bright cyan */
        --header-end: #2563eb;   /* mellow blue for balance */
        --header-text: #e6f7ff;  /* soft bright text */
        --subtext: #9be7ff;
        --bot-bubble-bg: #0b1b2a; /* dark slate for bot bubble */
        --bot-bubble-color: #cbd5e1; /* light gray text */
        --user-bubble-bg: #0369a1; /* teal/blue for user bubble */
        --user-bubble-color: #e6f7ff; /* light text */
        --input-bg: #041022;      /* darker input background */
        --input-border: #12303f;
        --typing-dot: #60a5fa;    /* calmer blue for typing dots */
        --scroll-thumb: #123543;
        --send-button-bg: #0ea5e9; /* vivid action color */
        --send-button-color: #021426; /* dark text on bright button */
        --send-button-disabled-bg: #12303f;
        --text-color: #e6f7ff; /* global text color in dark mode */
      }

      /* Apply variables (placed after existing rules so they override) */
      body { background: var(--page-bg); color: var(--text-color); }
      .chatbot-container { background: var(--container-bg); }
      .chat-header { background: linear-gradient(to right, var(--header-start), var(--header-end)); }
      .chat-header-info h1 { color: var(--header-text); }
      .chat-header-info p { color: var(--subtext); }
      .message.bot .message-bubble { background: var(--bot-bubble-bg); color: var(--bot-bubble-color); }
      .message.user .message-bubble { background: var(--user-bubble-bg); color: var(--user-bubble-color); }
      .input-section { background: var(--input-bg); }
      .input-wrapper textarea { border-color: var(--input-border); background: transparent; color: var(--text-color); }
      .typing-dot { background: var(--typing-dot); }
      .messages-container::-webkit-scrollbar-thumb { background: var(--scroll-thumb); }
      .send-button { background: var(--send-button-bg); color: var(--send-button-color); }
      .send-button:disabled { background: var(--send-button-disabled-bg); opacity: 0.6; color: rgba(255,255,255,0.5); }